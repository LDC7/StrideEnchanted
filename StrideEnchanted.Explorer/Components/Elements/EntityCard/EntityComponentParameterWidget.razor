@using MudBlazor
@using StrideEnchanted.Explorer.ViewModels
@using System.ComponentModel

@implements IDisposable

<MudTextField Label="@this.ViewModel.Name"
              Value="@this.ViewModel.Value"
              ReadOnly="@true"
              Class="my-1" />

@code {
  [Parameter]
  [EditorRequired]
  public required IEntityComponentParameterViewModel ViewModel { get; set; } = default!;

  protected override void OnInitialized()
  {
    this.ViewModel.PropertyChanged += this.OnParamChanged;
  }

  private void OnParamChanged(object? sender, PropertyChangedEventArgs e)
  {
    InvokeAsync(this.StateHasChanged);
  }

  public void Dispose()
  {
    this.ViewModel.PropertyChanged -= this.OnParamChanged;
  }
}
